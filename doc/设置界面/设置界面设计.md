为了保持与 Ollama 风格及本项目 **Zinc（锌色）** 主题的高度一致，我为你设计了一个沉浸式的设置界面。

这个界面将以“覆盖层”的形式出现在主对话区域，包含精致的表单布局、自定义样式的下拉框和输入框。

### 一、 设计描述 (Markdown)

#### 1. 视觉与交互逻辑
*   **布局**：采用垂直流式布局。顶部为标题和关闭按钮，中间为滚动设置区，底部为“保存”和“取消”操作栏。
*   **层级感**：背景采用半透明蒙版（遮盖聊天列表），设置面板使用 `#18181b`（Surface 色），边缘带有微弱的 `#27272a` 描边。
*   **组件细节**：
    *   **标签 (Label)**：使用 `#a1a1aa` 次要文本色，小字号。
    *   **输入框 (TextField)**：背景 `#09090b`，聚焦时边框变亮，支持一键清除（可选）。
    *   **下拉框 (ComboBox)**：自定义弹出菜单样式，确保箭头和选项列表符合暗黑美学。

#### 2. 状态管理
*   在 `main.qml` 中添加一个 `property bool settingsVisible: false`。
*   点击侧边栏“设置”按钮时，将该属性置为 `true`。

---

### 二、 参考代码实现

你可以将以下代码作为一个独立的 `SettingsOverlay.qml` 文件，或者直接集成到 `main.qml` 中。为了方便，我直接给出集成在 `mainArea` 中的代码段及组件样式。

#### 1. 定义设置项组件样式 (在 main.qml 的 ApplicationWindow 内定义)

```qml
// --- 在 ApplicationWindow 顶部添加属性 ---
property bool settingsVisible: false

// --- 定义设置界面 ---
Rectangle {
    id: settingsOverlay
    anchors.fill: parent
    color: "#aa000000" // 半透明蒙版
    visible: settingsVisible
    z: 2000 // 确保在标题栏之下，但高于所有内容
    
    // 拦截点击事件，防止穿透
    MouseArea { anchors.fill: parent; onClicked: {} }

    Rectangle {
        id: settingsPanel
        width: Math.min(parent.width - 40, 500)
        height: Math.min(parent.height - 80, 650)
        anchors.centerIn: parent
        color: "#18181b"
        radius: 12
        border.color: "#27272a"
        clip: true

        ColumnLayout {
            anchors.fill: parent
            anchors.margins: 24
            spacing: 20

            // 标题栏
            RowLayout {
                Layout.fillWidth: true
                Text {
                    text: "设置"
                    color: "white"
                    font.pixelSize: 18
                    font.weight: Font.Bold
                }
                Item { Layout.fillWidth: true }
                Button {
                    text: "✕"
                    flat: true
                    onClicked: settingsVisible = false
                    contentItem: Text { text: "✕"; color: "#71717a"; font.pixelSize: 16; horizontalAlignment: Text.AlignHCenter }
                    background: null
                }
            }

            // 滚动设置区域
            ScrollView {
                Layout.fillWidth: true
                Layout.fillHeight: true
                clip: true
                ScrollBar.vertical.policy: ScrollBar.AsNeeded

                ColumnLayout {
                    width: settingsPanel.width - 48
                    spacing: 16

                    // --- 设置项：视频平台 ---
                    ColumnLayout {
                        Layout.fillWidth: true
                        spacing: 8
                        Text { text: "视频平台"; color: "#a1a1aa"; font.pixelSize: 12 }
                        ComboBox {
                            id: platformCombo
                            Layout.fillWidth: true
                            model: ["Bilibili"]
                            delegate: ItemDelegate {
                                width: platformCombo.width
                                contentItem: Text { text: modelData; color: "white"; verticalAlignment: Text.AlignVCenter }
                                background: Rectangle { color: hovered ? "#27272a" : "#18181b" }
                            }
                            contentItem: Text { text: platformCombo.displayText; color: "white"; leftPadding: 12; verticalAlignment: Text.AlignVCenter }
                            background: Rectangle { color: "#09090b"; radius: 8; border.color: "#27272a" }
                        }
                    }

                    // --- 输入框设置项模版 ---
                    component SettingInput : ColumnLayout {
                        property string label: ""
                        property string defaultValue: ""
                        Layout.fillWidth: true
                        spacing: 8
                        Text { text: label; color: "#a1a1aa"; font.pixelSize: 12 }
                        TextField {
                            Layout.fillWidth: true
                            text: defaultValue
                            color: "white"
                            font.pixelSize: 13
                            verticalAlignment: Text.AlignVCenter
                            leftPadding: 12
                            rightPadding: 12
                            background: Rectangle {
                                color: "#09090b"
                                radius: 8
                                border.color: parent.activeFocus ? "#3b82f6" : "#27272a"
                                border.width: parent.activeFocus ? 2 : 1
                            }
                        }
                    }

                    SettingInput { label: "收藏夹地址"; defaultValue: "https://www.bilibili.com/medialist/play/ml387412427" }
                    SettingInput { label: "知识库 API (Dataset)"; defaultValue: "dataset-nCFE6gRoqoLnb5Vdn3O3vPc0" }
                    SettingInput { label: "知识库 ID"; defaultValue: "440bcad8-f7b1-4804-bae3-2ff47e268fee" }
                    SettingInput { label: "Dify 应用 URL"; defaultValue: "http://localhost/v1/chat-messages" }
                    SettingInput { label: "Dify 应用 API (App Key)"; defaultValue: "app-V2QqKcBG5msVqGCxPIgm2fR3" }
                }
            }

            // 底部按钮
            RowLayout {
                Layout.fillWidth: true
                Layout.topMargin: 10
                spacing: 12
                Item { Layout.fillWidth: true }
                
                Button {
                    text: "取消"
                    onClicked: settingsVisible = false
                    background: Rectangle { color: "transparent"; radius: 8; border.color: "#27272a" }
                    contentItem: Text { text: "取消"; color: "white"; horizontalAlignment: Text.AlignHCenter; verticalAlignment: Text.AlignVCenter; padding: 8 }
                }

                Button {
                    text: "保存配置"
                    onClicked: {
                        // 此处添加保存逻辑，例如写入本地 JSON 或 QSettings
                        settingsVisible = false
                    }
                    background: Rectangle { color: "white"; radius: 8 }
                    contentItem: Text { text: "保存配置"; color: "black"; font.weight: Font.Bold; horizontalAlignment: Text.AlignHCenter; verticalAlignment: Text.AlignVCenter; padding: 8 }
                }
            }
        }
    }
}
```

### 三、 如何集成到现有项目

1.  **侧边栏触发**：
    在 `sidebar` 的“设置”按钮 `onClicked` 逻辑中，添加 `window.settingsVisible = true`。
2.  **放置位置**：
    将上述代码块放在 `main.qml` 的 `ApplicationWindow` 最后（`Connections` 之前），确保它能够覆盖在主界面上方。
3.  **数据绑定**：
    为了在软件重启后保留这些设置，建议在 Python 端（`main.py`）使用 `QSettings` 或 `json` 模块创建一个配置管理类，并通过 `setContextProperty` 映射到 QML 中。

这个设置界面不仅功能完备，而且在视觉上完全融入了你之前建立的 **"Digital Garden"** 科技感设计风格。
### 第一个LLM提示词（用户内容提取与检索词生成）

#### 任务描述
将用户的自然语言输入转换为适合知识库检索的精准查询语句，提取核心关键词和用户真实意图，确保检索结果与用户需求高度相关。

#### 输入
用户的原始输入文本（自然语言提问、对话内容等）。

#### 输出
简洁、准确的检索查询字符串，包含核心关键词和明确的检索意图。

#### 提示词内容
```
你是一个专业的检索词生成专家，需要将用户的自然语言输入转换为适合知识库检索的精准查询语句。

**输入**：{{用户输入}}

**要求**：
1. 提取用户输入中的核心关键词（3-5个）
2. 明确用户的真实检索意图
3. 生成简洁、准确的检索查询字符串
4. 避免使用模糊、歧义的词汇
5. 保持查询语句的自然语言流畅性

**输出格式**：
直接输出检索查询字符串，无需任何解释或前缀。

**示例**：
用户输入："我想了解如何使用yt-dlp下载B站视频"
输出："yt-dlp B站视频下载 教程"

用户输入："有没有关于Python异步编程的视频？"
输出："Python 异步编程 视频教程"
```

### 第二个LLM提示词（检索内容总结与视频URL提取）

#### 任务描述
对知识库检索返回的相关内容进行总结，并提取其中包含的视频URL，按照指定格式输出结果。

#### 输入
知识库检索返回的相关内容（包含多个视频的标题、URL、摘要等信息）。

#### 输出
- 第一部分：对检索内容的简洁总结（100-200字）
- 第二部分：相关视频的URL列表，格式为"视频标题：视频URL"

#### 提示词内容
```
你是一个专业的内容总结和信息提取专家，需要对知识库检索返回的相关内容进行处理。

**输入**：
知识库检索结果：{{知识库返回内容}}

**要求**：
1. 首先对检索到的内容进行简洁总结（100-200字），概括核心信息和主要观点
2. 然后从每个知识库条目中提取视频URL和对应的视频标题
3. 确保URL完整、可点击，标题准确反映视频内容
4. 按照指定格式输出，两部分内容清晰分隔
5. 只处理与用户查询相关的内容，忽略无关信息

**输出格式**：
【内容总结】
<简洁总结文本>

【相关视频链接】
1. 视频标题1：视频URL1
2. 视频标题2：视频URL2
...

**示例**：
【内容总结】
检索到3个关于Python异步编程的视频，主要介绍了asyncio库的基本用法、事件循环机制以及异步IO的最佳实践，适合Python开发者学习异步编程基础。

【相关视频链接】
1. Python异步编程入门：https://www.bilibili.com/video/BV1xx411c7m9
2. asyncio核心概念解析：https://www.bilibili.com/video/BV1yy4y1C7aD
3. Python异步IO实战案例：https://www.bilibili.com/video/BV1f54y1B7aZ
```

### 使用说明
1. 在Dify ChatFlow中，将第一个提示词配置到"LLM（用户内容提取）"节点
2. 将第二个提示词配置到"LLM（检索内容总结与输出）"节点
3. 确保知识库中每个文档包含明确的视频标题和URL字段
4. 根据实际情况调整提示词中的字数限制和输出格式

### 优化建议
1. 根据实际知识库内容调整提示词中的输出格式
2. 如果知识库文档结构固定，可以在提示词中明确指定字段提取规则
3. 可以根据用户反馈持续优化提示词，提高检索准确性和总结质量

以上提示词设计考虑了Dify LLM节点的输入输出特性，确保能够准确处理用户输入并生成符合要求的输出格式。